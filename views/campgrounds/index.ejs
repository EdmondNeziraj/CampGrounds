<% layout('layouts/boilerplate')%>

<div id="map" style="width: 100%; height: 500px"></div>
<h1 class="my-3">All Campgrounds</h1>
<div class="row campground-card-container">
    <% for (let campground of campgrounds) {%>
        <div class="col-4">
            <div class="card mb-3">
                <div class="row">
                  <div class="col-md-4">
                    <% if (campground.images.length) {%>
                    <img class="img-fluid" src="<%= campground.images[0].url %>" alt=""> 
                    <%} else {%> 
                    <img class="img-fluid" src="https://res.cloudinary.com/dcno0ppgb/image/upload/v1668554407/CampGrounds/ibp2o6klrsdl7jelmrfx.jpg" alt=""> 
                    <%};%>
                  </div>
                  <div class="col-md-8">
                    <div class="card-body ">
                      <h5 class="cg-title card-title"><a class="cg-title" href="/campgrounds/<%=campground._id%>"><%=campground.title%></a></h5>
                      <!-- <p class="card-text description-text"><%= campground.description%></p> -->
                      <p class="cg-location card-text text-muted "><%= campground.location%></p>
                      <p class="cg-price card-text text-muted ">$<%= campground.price%></p>
                    </div>

                  </div>
                </div>
              </div>
        </div>
        
    <% };%>
</div>

<style>
  .cg-title {
    text-decoration: none;
    color: #212529;
  }
  .cg-location {
    margin: 8px 0;
  }
</style>

<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const campgrounds = {features: <%- JSON.stringify(campgrounds)%>};
</script>

<script src="/javascripts/clusterMap.js"></script>